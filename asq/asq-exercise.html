<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="./asq-progress.html">
<link rel="import" href="./asq-confidence.html">
<link  rel="import" href="asq-multi-choice.html">
<link  rel="import" href="asq-stem.html">
<link  rel="import" href="asq-text-input.html">
<link  rel="import" href="asq-code.html">
<link  rel="import" href="asq-css-select.html">
<link  rel="import" href="asq-js-function-body.html">


<polymer-element name="asq-exercise" attributes="exerciseid">
  <template>
    <style> 
      .green {
        color: #fff;
        background-color: #5cb85c;
        border-color: #4cae4c;
      }
      .amber{
        background-color: #FFC107;
      }

      div {
        margin-left: 2em;
        margin-right: 2em;
      }

      #buttons {
        text-align: right;
      }


    </style>

    <template if="{{role=='viewer'}}">
      <article id="ex" class="asq-exercise">
        <div>
          <content select="asq-stem"></content>
        </div>
        <div id="exercises" >
          <content></content>
        </div>
        <div id="buttons">
          <asq-confidence></asq-confidence>
          <paper-button role="button" class="green" id='submitbutton{{exerciseid}}'>Submit</paper-button>
          <paper-button role="button" class="amber" id='editbutton{{exerciseid}}'>Edit</paper-button> 
        </div>
      </article>
    </template>

    <template if="{{role=='presenter'}}">
      <article id="ex" class="asq-exercise">
        <div>
          <content select="asq-stem"></content>
        </div>
        <div id="exercises" >
          <content></content>
        </div>
        <div id="buttons">
          <asq-progress></asq-progress>
          <paper-button role="button" class="green">Stats</paper-button>
          <content></content>
        </div>
      </article>
    </template> 

<!-- 

    <article id="ex" class="asq-exercise">
      <div>
        <content select="asq-stem"></content>
      </div>
      <div id="exercises" >
        <content></content>
      </div>
      <div id="buttons">
        <template if="{{role=='viewer'}}">
          <asq-confidence></asq-confidence>
          <button class="submit_button" id='submitbutton{{exerciseid}}'>Submit</button>
          <button class="edit_button"  id="editbutton{{exerciseid}}">Edit</button>    
        </template>
        <template if="{{role=='presenter'}}">
          <asq-progress></asq-progress>
          <button class="submit_button">Stats</button>
          <content></content>
        </template> 
      </div> -->
    </article>

  </template>

  <script>
    Polymer({
      extends: "form",
      role: undefined, 

      //I am trying to see if we can have every question type to implement a superclass called 'asq-question'
      // then we can check if the childNodes are of type 'asq-question' and pass them the role


      setRole: function(role) {
        this.role = role;
        var ALL_QUESTION_TYPES = ["asq-multi-choice", "asq-text-input"]

        var nodes = this.childNodes.array();
        nodes.forEach(function(elem, index, array) {

          if ( ALL_QUESTION_TYPES.indexOf(elem.toString()) != -1 ) {
            elem.setRole(this.role);
          }
        });
      }, 

      ready: function  () {
        this.setRole("viewer");
      }

    });
  </script>
</polymer-element>