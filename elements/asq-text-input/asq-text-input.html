<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../asq-shared-mixin.html">

<polymer-element name="asq-text-input" attributes="type value placeholder">
  <template>
    <div class="asq-text-input">
      <label for="input"><content></content></label>
      <input type="{{type}}" name="input" value="{{value}}" placeholder="{{placeholder}}">
    </div>
  </template>

  <script>
    (function() {
      var isASQElement_ = true;
      var isQuestion_ = true;
      var type_ = "asq-text-input";

      Polymer('asq-text-input', Polymer.mixin({
        publish: {
          role: 'viewer',
          correctAnswer: ''
        },

        answer: "",

        created: function  () {
          if ( this.attributes.hasOwnProperty("correctAnswer") ) {
            this.answer = this.attributes["correctAnswer"].value;
            this.removeAttribute("correctanswer");
            // this.attributes["correctanswer"].value = "heh";
          } 
        },

        toString: function() {
          return "asq-text-input";
        },


        keyhandler: function(event, detail, sender) {
          // console.log(event.which);

        },

        get isASQElement() {
          return isASQElement_;
        },

        get isQuestion() {
          return isQuestion_;
        },

        get type() {
          return type_;
        },

        collectAnswer: function() {
          if ( this.role !== "viewer" ) {
            return;
          }
          return this.value.replace(/[\s]+/g, " ").trim();
        }
      
      }), asqSharedMixin);
    })();
  </script>
</polymer-element>