<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../asq-option/asq-option.html">
<link rel="import" href="../asq-shared-mixin.html">

<polymer-element name="asq-multi-choice">
  <template>
    <style>
    </style>

    <!-- (for now) Keep same when either viewer or presenter -->
    <div class="asq-multi-choice">
      <content select="asq-stem"></content>
      <div id="choices">
        <ol>
          <content></content>
        </ol>
      </div>
    </div>
    
  </template>

  <script>
  (function() {
    var isASQElement_ = true;
    var isQuestion_ = true;
    var type_ = "asq-multi-choice";


    Polymer('asq-multi-choice', Platform.mixin({
     
      publish: {
        role: "viewer"
      },

      get isASQElement() {
        return isASQElement_;
      },

      get isQuestion() {
        return isQuestion_;
      },

      get type() {
        return type_;
      },

      collectAnswer: function() {
        if ( this.role !== "viewer" ) {
          return;
        }

        var options = this.childNodes.array().filter(function(el) {
          return el.isASQElement && el.type == "asq-option";
        });

        console.log("options", options);
        var submisstion = [];
        options.forEach(function(elem, index) {
          submisstion.push(elem.collectAnswer());
        });   

        return submisstion;
      }

    }), asqSharedMixin);
  })();
  </script>
</polymer-element>